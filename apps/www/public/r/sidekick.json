{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sidekick",
  "title": "Sidekick",
  "description": "An AI chat sidebar component with conversation history, message bubbles, and integrated prompt input.",
  "dependencies": [
    "nanoid",
    "ai"
  ],
  "registryDependencies": [
    "@ai-elements/message",
    "@ai-elements/conversation",
    "button",
    "input",
    "separator",
    "sheet",
    "tooltip",
    "https://sidekick.montek.dev/r/prompt-input.json"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/sidekick/index.tsx",
      "content": "\"use client\";\n\nimport { PanelLeftIcon } from \"lucide-react\";\nimport React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\n\nconst SIDEKICK_COOKIE_NAME = \"sidekick_state\";\nconst SIDEKICK_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEKICK_WIDTH = \"24rem\";\nconst SIDEKICK_WIDTH_MOBILE = \"100%\";\nconst SIDEKICK_WIDTH_COLLAPSED = \"0rem\";\nconst SIDEKICK_KEYBOARD_SHORTCUT = \"i\";\n\ninterface SidekickContextProps {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidekick: () => void;\n}\n\nconst SidekickContext = React.createContext<SidekickContextProps | null>(null);\n\nfunction useSidekick() {\n  const context = React.useContext(SidekickContext);\n  if (!context) {\n    throw new Error(\"useSidekick must be used within a SidekickProvider.\");\n  }\n  return context;\n}\n\n// Optional hook that returns null if no provider is present (for standalone mode)\nfunction useOptionalSidekick() {\n  return React.useContext(SidekickContext);\n}\n\nfunction useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState(false);\n\n  React.useEffect(() => {\n    const checkMobile = () => setIsMobile(window.innerWidth < 768);\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  return isMobile;\n}\n\ntype SidekickProviderProps = React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean;\n  defaultOpenMobile?: boolean;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n};\n\nfunction SidekickProvider({\n  defaultOpen = true,\n  defaultOpenMobile = false,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: SidekickProviderProps) {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(defaultOpenMobile);\n\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n      // biome-ignore lint/suspicious/noDocumentCookie: Used for client-side state persistence\n      document.cookie = `${SIDEKICK_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEKICK_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open]\n  );\n\n  const toggleSidekick = React.useCallback(\n    () =>\n      isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open),\n    [isMobile, setOpen]\n  );\n\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEKICK_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault();\n        toggleSidekick();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidekick]);\n\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidekickContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidekick,\n    }),\n    [state, open, setOpen, isMobile, openMobile, toggleSidekick]\n  );\n\n  return (\n    <SidekickContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          className={cn(\"flex h-full min-h-svh w-full min-w-0\", className)}\n          data-slot=\"sidekick-wrapper\"\n          style={\n            {\n              \"--sidekick-width\": SIDEKICK_WIDTH,\n              \"--sidekick-width-collapsed\": SIDEKICK_WIDTH_COLLAPSED,\n              ...style,\n            } as React.CSSProperties\n          }\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidekickContext.Provider>\n  );\n}\n\ntype SidekickProps = React.ComponentProps<\"aside\"> & {\n  side?: \"left\" | \"right\";\n  mobileBehavior?: \"sheet\" | \"inline\" | \"floating\";\n  /** When true, renders as a standalone panel without toggle behavior */\n  standalone?: boolean;\n};\n\nfunction Sidekick({\n  side = \"right\",\n  mobileBehavior = \"sheet\",\n  standalone = false,\n  className,\n  children,\n  ...props\n}: SidekickProps) {\n  const context = useOptionalSidekick();\n\n  // Standalone mode: render as a simple panel without provider\n  if (standalone || !context) {\n    return (\n      <aside\n        className={cn(\n          \"flex h-full flex-col border-l bg-background text-foreground\",\n          side === \"left\" && \"border-r border-l-0\",\n          className\n        )}\n        data-side={side}\n        data-slot=\"sidekick\"\n        data-standalone=\"true\"\n        style={\n          {\n            \"--sidekick-width\": SIDEKICK_WIDTH,\n          } as React.CSSProperties\n        }\n        {...props}\n      >\n        <div className=\"flex h-full w-full flex-col\">{children}</div>\n      </aside>\n    );\n  }\n\n  const { isMobile, state, openMobile, setOpenMobile } = context;\n\n  if (isMobile && mobileBehavior === \"sheet\") {\n    return (\n      <Sheet onOpenChange={setOpenMobile} open={openMobile}>\n        <SheetContent\n          className=\"flex h-full w-full flex-col bg-background p-0 [&>button]:hidden\"\n          data-mobile=\"true\"\n          data-sidekick=\"panel\"\n          data-slot=\"sidekick\"\n          side={side}\n          style={\n            {\n              \"--sidekick-width\": SIDEKICK_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>AI Assistant</SheetTitle>\n            <SheetDescription>Chat with your AI assistant.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  if (isMobile && mobileBehavior === \"inline\") {\n    return (\n      <aside\n        className={cn(\n          \"flex w-full flex-col border-t bg-background text-foreground transition-[max-height,opacity] duration-200\",\n          openMobile\n            ? \"max-h-[75vh] opacity-100\"\n            : \"max-h-0 overflow-hidden opacity-0\",\n          className\n        )}\n        data-side={side}\n        data-slot=\"sidekick\"\n        data-state={openMobile ? \"expanded\" : \"collapsed\"}\n        {...props}\n      >\n        <div className=\"flex w-full flex-col\">{children}</div>\n      </aside>\n    );\n  }\n\n  if (isMobile && mobileBehavior === \"floating\") {\n    return (\n      <aside\n        className={cn(\n          \"absolute inset-y-0 right-0 flex w-full flex-col border-l bg-background text-foreground transition-transform duration-200\",\n          openMobile ? \"translate-x-0\" : \"translate-x-full\",\n          className\n        )}\n        data-side={side}\n        data-slot=\"sidekick\"\n        data-state={openMobile ? \"expanded\" : \"collapsed\"}\n        {...props}\n      >\n        <div className=\"flex h-full w-full flex-col\">{children}</div>\n      </aside>\n    );\n  }\n\n  return (\n    <aside\n      className={cn(\n        \"group peer hidden flex-col border-l bg-background text-foreground transition-[width] duration-200 ease-linear md:flex\",\n        state === \"expanded\" ? \"w-(--sidekick-width)\" : \"w-0 overflow-hidden\",\n        side === \"left\" && \"order-first border-r border-l-0\",\n        className\n      )}\n      data-side={side}\n      data-slot=\"sidekick\"\n      data-state={state}\n      {...props}\n    >\n      <div className=\"flex h-full w-(--sidekick-width) flex-col\">\n        {children}\n      </div>\n    </aside>\n  );\n}\n\nfunction SidekickTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const context = useOptionalSidekick();\n\n  // In standalone mode, trigger does nothing (or can be hidden)\n  if (!context) {\n    return null;\n  }\n\n  const { toggleSidekick } = context;\n\n  return (\n    <Button\n      className={cn(\"size-7\", className)}\n      data-sidekick=\"trigger\"\n      data-slot=\"sidekick-trigger\"\n      onClick={(event) => {\n        onClick?.(event);\n        toggleSidekick();\n      }}\n      size=\"icon\"\n      variant=\"ghost\"\n      {...props}\n    >\n      <PanelLeftIcon className=\"size-4\" />\n      <span className=\"sr-only\">Toggle AI Assistant</span>\n    </Button>\n  );\n}\n\nfunction SidekickHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"flex h-14 shrink-0 items-center gap-2 border-b px-4\",\n        className\n      )}\n      data-slot=\"sidekick-header\"\n      {...props}\n    />\n  );\n}\n\nfunction SidekickFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\"shrink-0 border-t p-4\", className)}\n      data-slot=\"sidekick-footer\"\n      {...props}\n    />\n  );\n}\n\nfunction SidekickContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\"flex min-h-0 flex-1 flex-col overflow-hidden\", className)}\n      data-slot=\"sidekick-content\"\n      {...props}\n    />\n  );\n}\n\nfunction SidekickInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      className={cn(\"relative flex min-w-0 flex-1 flex-col\", className)}\n      data-slot=\"sidekick-inset\"\n      {...props}\n    />\n  );\n}\n\nfunction SidekickSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      className={cn(\"mx-2 w-auto\", className)}\n      data-slot=\"sidekick-separator\"\n      {...props}\n    />\n  );\n}\n\nfunction SidekickInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      className={cn(\"h-8 w-full bg-background shadow-none\", className)}\n      data-slot=\"sidekick-input\"\n      {...props}\n    />\n  );\n}\n\nexport {\n  // Sidekick\n  Sidekick,\n  SidekickContent,\n  SidekickFooter,\n  SidekickHeader,\n  SidekickInset,\n  SidekickInput,\n  SidekickProvider,\n  SidekickSeparator,\n  SidekickTrigger,\n  useSidekick,\n};\n\nSidekick.Header = SidekickHeader;\nSidekick.Content = SidekickContent;\nSidekick.Footer = SidekickFooter;\nSidekick.Inset = SidekickInset;\nSidekick.Input = SidekickInput;\nSidekick.Separator = SidekickSeparator;\nSidekick.Trigger = SidekickTrigger;\nSidekick.Provider = SidekickProvider;\n",
      "type": "registry:component",
      "target": "components/ui/sidekick.tsx"
    }
  ],
  "type": "registry:component"
}
