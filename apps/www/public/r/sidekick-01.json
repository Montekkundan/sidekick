{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sidekick-01",
  "title": "Sidekick Standalone Chat",
  "description": "A standalone AI chat interface with gateway integration and streaming responses. Demonstrates how to build a complete chat experience with the Sidekick component and AI Gateway.",
  "dependencies": [
    "nanoid",
    "ai"
  ],
  "registryDependencies": [
    "https://sidekick.montek.dev/r/sidekick.json",
    "https://sidekick.montek.dev/r/prompt-input.json",
    "button",
    "https://sidekick.montek.dev/r/gateway.json"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/sidekick-01/page.tsx",
      "content": "import { SidekickStandalone } from \"@/registry/new-york/blocks/sidekick-01/components/sidekick-standalone\"\n\nexport default function Page() {\n  return (\n    <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\n      <div className=\"w-full max-w-sm\">\n        <SidekickStandalone />\n      </div>\n    </div>\n  )\n}\n",
      "type": "registry:page",
      "target": "app/sidekick/page.tsx"
    },
    {
      "path": "registry/new-york/blocks/sidekick-01/components/sidekick-standalone.tsx",
      "content": "\"use client\";\n\nimport {\n  Conversation,\n  ConversationContent,\n} from \"@repo/design-system/components/ai-elements/conversation\";\nimport {\n  Message,\n  MessageContent,\n} from \"@repo/design-system/components/ai-elements/message\";\nimport { streamText } from \"ai\";\nimport { nanoid } from \"nanoid\";\nimport React from \"react\";\nimport {\n  PromptInput,\n  PromptInputBody,\n  PromptInputFooter,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputTools,\n} from \"@/registry/new-york/blocks/prompt-input\";\nimport {\n  Sidekick,\n  SidekickContent,\n  SidekickFooter,\n  SidekickHeader,\n} from \"@/registry/new-york/blocks/sidekick\";\nimport { createGatewayModel } from \"@/registry/new-york/lib/gateway\";\n\ninterface ChatMessage {\n  id: string;\n  from: \"user\" | \"assistant\";\n  content: string;\n}\n\nexport function SidekickStandalone() {\n  const [messages, setMessages] = React.useState<ChatMessage[]>([\n    {\n      id: nanoid(),\n      from: \"user\",\n      content: \"Hello!\",\n    },\n    {\n      id: nanoid(),\n      from: \"assistant\",\n      content: \"Hi there! How can I help you today?\",\n    },\n  ]);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  const handleSubmit = async (message: { text: string }) => {\n    if (!message.text.trim()) {\n      return;\n    }\n\n    // Add user message\n    const userMessage: ChatMessage = {\n      id: nanoid(),\n      from: \"user\",\n      content: message.text,\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    setIsLoading(true);\n\n    try {\n      // Create AI model using gateway\n      const model = createGatewayModel({\n        modelId: \"openai/gpt-4o-mini\",\n      });\n\n      // Create assistant message placeholder\n      const assistantMessageId = nanoid();\n      setMessages((prev) => [\n        ...prev,\n        {\n          id: assistantMessageId,\n          from: \"assistant\",\n          content: \"\",\n        },\n      ]);\n\n      // Stream the response\n      const result = streamText({\n        model,\n        messages: [\n          ...messages.map((msg) => ({\n            role:\n              msg.from === \"user\" ? (\"user\" as const) : (\"assistant\" as const),\n            content: msg.content,\n          })),\n          {\n            role: \"user\" as const,\n            content: message.text,\n          },\n        ],\n      });\n\n      // Handle streaming\n      let fullText = \"\";\n      for await (const chunk of result.textStream) {\n        fullText += chunk;\n        setMessages((prev) =>\n          prev.map((msg) =>\n            msg.id === assistantMessageId ? { ...msg, content: fullText } : msg\n          )\n        );\n      }\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      // Add error message\n      setMessages((prev) => [\n        ...prev,\n        {\n          id: nanoid(),\n          from: \"assistant\",\n          content: \"Sorry, I encountered an error. Please try again.\",\n        },\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"h-[600px] w-full max-w-md overflow-hidden rounded-lg border\">\n      <Sidekick standalone>\n        <SidekickHeader>\n          <span className=\"font-semibold\">AI Assistant</span>\n        </SidekickHeader>\n\n        <SidekickContent>\n          <Conversation>\n            <ConversationContent>\n              {messages.map((msg) => (\n                <Message from={msg.from} key={msg.id}>\n                  <MessageContent>{msg.content}</MessageContent>\n                </Message>\n              ))}\n            </ConversationContent>\n          </Conversation>\n        </SidekickContent>\n\n        <SidekickFooter>\n          <PromptInput onSubmit={handleSubmit}>\n            <PromptInputBody>\n              <PromptInputTextarea\n                disabled={isLoading}\n                placeholder=\"Ask me anything...\"\n              />\n            </PromptInputBody>\n            <PromptInputFooter>\n              <PromptInputTools />\n              <PromptInputSubmit disabled={isLoading} />\n            </PromptInputFooter>\n          </PromptInput>\n        </SidekickFooter>\n      </Sidekick>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ],
  "meta": {
    "iframeHeight": "800px"
  },
  "categories": [
    "sidekick"
  ],
  "type": "registry:block"
}
